<Window x:Class="TacoBell.Views.LoginPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TacoBell.Views"
        mc:Ignorable="d"
        Title="LoginPage" Height="600" Width="900"
        xmlns:helpers="clr-namespace:TacoBell.Helpers"
        WindowStartupLocation="CenterScreen"
        Background="#5C2D73">

    <Window.Resources>
        <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <helpers:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
        <helpers:BoolToTextConverter x:Key="BoolToTextConverter"/>
        <helpers:SwitchModeTextConverter x:Key="SwitchModeTextConverter"/>
    </Window.Resources>

    <Grid>
        <!-- Top Black Bar -->
        <Grid Background="Black" Height="80" VerticalAlignment="Top" Panel.ZIndex="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Side: User Icon + Login Text -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                <Ellipse Width="40" Height="40" Fill="White" VerticalAlignment="Center"/>
                <Button Content="Login / Sign up"
                        Style="{StaticResource HoverTextButtonStyle}"
                        Command="{Binding NavigateToLoginCommand}"
                        VerticalAlignment="Center" Margin="10,0,0,0"/>
            </StackPanel>

            <!-- Centered Logo -->
            <Image Grid.Column="1" Source="/Assets/Images/logo.png" Height="50" VerticalAlignment="Center" HorizontalAlignment="Center"/>

            <!-- App Menu Icon Button -->
            <Button Grid.Column="2" Command="{Binding OpenAppMenuCommand}" Background="Transparent" BorderThickness="0" Cursor="Hand"
                    HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,20,0" Padding="0">
                <StackPanel Orientation="Vertical">
                    <Rectangle Height="4" Width="25" Fill="White" Margin="0,3"/>
                    <Rectangle Height="4" Width="25" Fill="White" Margin="0,3"/>
                    <Rectangle Height="4" Width="25" Fill="White" Margin="0,3"/>
                </StackPanel>
            </Button>
        </Grid>

        <!-- App Menu -->
        <Border Background="#CC2E0854" CornerRadius="0,0,12,12" Padding="5" Height="220" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,80,20,0"
                Visibility="{Binding IsAppMenuVisible, Converter={StaticResource BoolToVisibilityConverter}}"
                Panel.ZIndex="2">
            <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="40">
                <Button Content="HOME" Command="{Binding NavigateToHomeCommand}" Style="{StaticResource MenuButtonStyle}" Margin="8"/>
                <Button Content="MENU" Command="{Binding NavigateToMenuCommand}" Style="{StaticResource MenuButtonStyle}" Margin="8"/>
                <Button Content="ACCOUNT" Command="{Binding NavigateToAccountCommand}" Style="{StaticResource MenuButtonStyle}" Margin="8"/>
            </StackPanel>
        </Border>

        <!-- Scrollable Content (Main) -->
        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,80,0,0">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Width="500" Margin="0,20">

                <!-- FORM TITLE -->
                <TextBlock Text="{Binding IsLoginMode, Converter={StaticResource BoolToTextConverter}}"
                   FontSize="24" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,20"/>

                <!-- FORM FIELDS -->
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- EMAIL -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Email:" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                    <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Email}" Margin="0,5"/>

                    <!-- PASSWORD -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Password:" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                    <PasswordBox x:Name="PasswordBox" Grid.Row="1" Grid.Column="1" Margin="0,5" PasswordChanged="PasswordBox_PasswordChanged"/>

                    <!-- REGISTER-ONLY FIELDS -->
                    <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Visibility="{Binding IsLoginMode, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="First Name:" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding FirstName}" Margin="0,5"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Last Name:" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding LastName}" Margin="0,5"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Phone Number:" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding PhoneNumber}" Margin="0,5"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Address:" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding DeliveryAddress}" Margin="0,5"/>
                        </Grid>
                    </StackPanel>
                </Grid>

                <!-- ERROR MESSAGE -->
                <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" Margin="0,10" HorizontalAlignment="Center"/>

                <!-- SUBMIT & SWITCH -->
                <Button Content="Submit" Command="{Binding SubmitCommand}" Margin="0,5" Width="120" HorizontalAlignment="Center"/>
                <Button Content="{Binding IsLoginMode, Converter={StaticResource SwitchModeTextConverter}}"
                Command="{Binding SwitchToRegisterCommand}" Margin="0,5" Width="200" HorizontalAlignment="Center"/>

            </StackPanel>
        </ScrollViewer>


    </Grid>
</Window>
